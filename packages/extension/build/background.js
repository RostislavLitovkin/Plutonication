(()=>{"use strict";const e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this");var n,o;n="chrome",o=e.browser,void 0===e[n]&&(e[n]=o);let t="";chrome.runtime.onMessage.addListener((async function(e,n,o){if("open_popup"===e.message){t="",await chrome.tabs.query({active:!0,currentWindow:!0},(function(e){let n=e[0];t=n.favIconUrl||"none"}));let n=chrome.runtime.getURL("index.html")+`?key=${encodeURIComponent(e.key)}`+`&name=${encodeURIComponent(e.name)}`+`&icon=${encodeURIComponent(await async function(){for(;""===t;)await new Promise((e=>setTimeout(e,1e3)));return t}())}`+`&url=${encodeURIComponent(e.url)}`;chrome.windows.create({url:n,type:"popup",width:300,height:400})}}))})();