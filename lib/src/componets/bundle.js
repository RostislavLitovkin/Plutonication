/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function n(e){var i="function"==typeof Map?new Map:void 0;return n=function(n){if(null===n||!function(n){try{return-1!==Function.toString.call(n).indexOf("[native code]")}catch(t){return"function"==typeof n}}(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(n))return i.get(n);i.set(n,e)}function e(){return t(n,arguments,o(this).constructor)}return e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r(e,n)},n(e)}function t(n,o,i){return t=e()?Reflect.construct.bind():function(n,t,e){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(n,o));return e&&r(i,e.prototype),i},t.apply(null,arguments)}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}function r(n,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},r(n,t)}function o(n){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},o(n)}function i(){i=function(){return t};var n,t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(n,t,e){n[t]=e.value},c="function"==typeof Symbol?Symbol:{},a=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",u=c.toStringTag||"@@toStringTag";function f(n,t,e){return Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),n[t]}try{f({},"")}catch(n){f=function(n,t,e){return n[t]=e}}function d(n,t,e,r){var i=t&&t.prototype instanceof b?t:b,c=Object.create(i.prototype),a=new I(r||[]);return o(c,"_invoke",{value:P(n,e,a)}),c}function p(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=d;var y="suspendedStart",h="suspendedYield",v="executing",m="completed",g={};function b(){}function w(){}function x(){}var k={};f(k,a,(function(){return this}));var E=Object.getPrototypeOf,L=E&&E(E(T([])));L&&L!==e&&r.call(L,a)&&(k=L);var j=x.prototype=b.prototype=Object.create(k);function q(n){["next","throw","return"].forEach((function(t){f(n,t,(function(n){return this._invoke(t,n)}))}))}function O(n,t){function e(o,i,c,a){var l=p(n[o],n,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==s(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(n){e("next",n,c,a)}),(function(n){e("throw",n,c,a)})):t.resolve(f).then((function(n){u.value=n,c(u)}),(function(n){return e("throw",n,c,a)}))}a(l.arg)}var i;o(this,"_invoke",{value:function(n,r){function o(){return new t((function(t,o){e(n,r,t,o)}))}return i=i?i.then(o,o):o()}})}function P(t,e,r){var o=y;return function(i,c){if(o===v)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw c;return{value:n,done:!0}}for(r.method=i,r.arg=c;;){var a=r.delegate;if(a){var s=_(a,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===y)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var l=p(t,e,r);if("normal"===l.type){if(o=r.done?m:h,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function _(t,e){var r=e.method,o=t.iterator[r];if(o===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=n,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=p(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,g;var c=i.arg;return c?c.done?(e[t.resultName]=c.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,g):c:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function S(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function R(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function I(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(S,this),this.reset(!0)}function T(t){if(t||""===t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(r.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}throw new TypeError(s(t)+" is not iterable")}return w.prototype=x,o(j,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,x):(n.__proto__=x,f(n,u,"GeneratorFunction")),n.prototype=Object.create(j),n},t.awrap=function(n){return{__await:n}},q(O.prototype),f(O.prototype,l,(function(){return this})),t.AsyncIterator=O,t.async=function(n,e,r,o,i){void 0===i&&(i=Promise);var c=new O(d(n,e,r,o),i);return t.isGeneratorFunction(e)?c:c.next().then((function(n){return n.done?n.value:c.next()}))},q(j),f(j,u,"Generator"),f(j,a,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var t=Object(n),e=[];for(var r in t)e.push(r);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(r,o){return a.type="throw",a.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i],a=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var s=r.call(c,"catchLoc"),l=r.call(c,"finallyLoc");if(s&&l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(s){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=n,c.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(c)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),g},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),R(e),g}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var r=e.completion;if("throw"===r.type){var o=r.arg;R(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),g}},t}function c(n,t,e,r,o,i,c){try{var a=n[i](c),s=a.value}catch(n){return void e(n)}a.done?t(s):Promise.resolve(s).then(r,o)}function a(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(n){c(i,r,o,a,s,"next",n)}function s(n){c(i,r,o,a,s,"throw",n)}a(void 0)}))}}function s(n){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s(n)}function l(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function u(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,d(r.key),r)}}function f(n,t,e){return t&&u(n.prototype,t),e&&u(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function d(n){var t=function(n,t){if("object"!=s(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var r=e.call(n,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==s(t)?t:String(t)}var p=new(function(){function n(t,e,r,o){l(this,n),this.url=t||this.ToUri(),this.key=e||n.GenerateKey(),this.name=r,this.icon=o}return f(n,[{key:"ToUri",value:function(){var n=["url=".concat(encodeURIComponent(this.url)),"key=".concat(encodeURIComponent(this.key))];return null!=this.name&&n.push("name=".concat(encodeURIComponent(this.name))),null!=this.icon&&n.push("icon=".concat(encodeURIComponent(this.icon))),"plutonication:?".concat(n.join("&"))}}],[{key:"GenerateKey",value:function(){return Date.now().toString()}}]),n}())("wss://plutonication-acnha.ondigitalocean.app/","1","Galaxy Logic Game","https://rostislavlitovkin.pythonanywhere.com/logo");console.log("accessCredentials",p.ToUri());var y=function(){function n(t){l(this,n),this.socket=io(t.url)}var t,e;return f(n,[{key:"initializeAsync",value:(e=a(i().mark((function n(){var t=this;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var e,r,o,i;null===(e=t.socket)||void 0===e||e.on("connect",(function(){var n;console.log("Connected!"),null===(n=t.socket)||void 0===n||n.emit("create_room",{Data:"Nothing",Room:p.key})})),null===(r=t.socket)||void 0===r||r.on("message",(function(n){console.log("Received message:",n)})),null===(o=t.socket)||void 0===o||o.on("payload_signature",(function(n){console.log("Received json payload signature:",n)})),null===(i=t.socket)||void 0===i||i.on("raw_signature",(function(n){console.log("Received raw payload signature:",n)})),n()})));case 1:case"end":return n.stop()}}),n)}))),function(){return e.apply(this,arguments)})},{key:"receivePubKeyAsync",value:(t=a(i().mark((function n(){var t=this;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var e;null===(e=t.socket)||void 0===e||e.on("pubkey",(function(e){console.log("Received pubkey:",e),t.pubKey=e,n(e)}))})));case 1:case"end":return n.stop()}}),n)}))),function(){return t.apply(this,arguments)})},{key:"disconnectServer",value:function(){this.socket&&this.socket.disconnect()}}]),n}(),h=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&r(n,t)}(d,n);var t,c,u=(t=d,c=e(),function(){var n,e=o(t);if(c){var r=o(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return function(n,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(this,n)});function d(){var n;l(this,d);var t,e=(n=u.call(this)).attachShadow({mode:"open"}),r=document.createElement("div");r.innerHTML='\n      <div class="qr-container" id="qr-container">\n        <div>\n          <h4 class="welcome-title" id="welcome-title">Welcome to Plutonication</h4>\n          <div class="generate-btn-container" id="generate-btn-container">\n            <button class="generate-btn" id="generate-btn">Generar QR</button>\n          </div>\n          <div class="scan-qr-container" id="scan-qr-container">\n            <div class="scan-qr-title-container" id="scan-qr-title-container">\n              <p class="scan-qr-title" id="scan-qr-title">Plutonication Connect</p>\n            </div>\n            <img class="qr-back-arrow" id="qr-back-arrow" alt="close" src="../../assets/svg/Arrow Back.svg" width={25} height={25}></div>\n            <div class="qr-code-container" id="qr-code-container">\n              <div class="qr-code" id="qr-code"></div>\n            </div>\n            <div class="scan-qr-text-container" id="scan-qr-text-container">\n              <p class="scan-qr-text" id="scan-qr-text">Scan this QR with your phone</p>\n            </div>\n          </div>\n          <div>\n            <div id="connection-info" class="connection-info">Connected to: </div>\n            <div class="generate-btn-container" id="generate-btn-container">\n              <button class="disconnect-btn" id="disconnect-btn">Disconnect</button>\n            </div>\n          </div>\n        </div>\n      </div>\n      ',e.appendChild(r);var o=document.createElement("script");o.src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js";var c=document.createElement("script");c.src="https://cdn.socket.io/4.3.2/socket.io.min.js",document.body.appendChild(o),document.body.appendChild(c);var s=document.createElement("style");s.textContent="\n        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@500&family=Lexend:wght@500&family=Roboto&display=swap');\n    \n        * {\n          font-family: 'Lexend', serif !important;\n        }\n        .qr-container {\n          margin: 0;\n          padding: 0;\n          box-sizing: border-box;\n          text-size-adjust: none;\n          -webkit-text-size-adjust: none;\n        \n          background-color: rgb(14, 16, 16);\n          color: #f0f0f0;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          width: 100%;\n          height: 100vh;\n        }\n    \n        h1, h2, h3, h4, h5, h6 {\n          margin: 0;\n          padding: 0;\n        }\n    \n        ul, ol {\n          margin: 0;\n          padding: 0;\n          list-style: none; \n        }\n    \n        button:hover {\n          cursor: pointer;\n        }\n    \n        .disconnect-btn {\n          display: none;\n        }\n    \n        .scan-qr-container {\n          display: none\n        }\n    \n        .generate-btn-container {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-top: 1rem;\n        }\n    \n        .generate-btn, .disconnect-btn{\n          background-color: #f0f0f0;\n          padding: 0.5rem;\n          color: rgb(14, 16, 16);\n          font-weight: 500;\n          font-family: 'Lexend', serif;\n          border-radius: 0.3rem;\n          transition: transform 0.2s ease;\n        }\n    \n        .generate-btn:hover, .disconnect-btn:hover {\n          transform: scale(1.05);\n          cursor: pointer;\n        }\n    \n        .disconnect-btn {\n          display: none;\n        }\n    \n        .scan-qr-title-container {\n          display: inline;\n          position: relative;\n          top: 4.2rem;\n          z-index: 1;\n        }\n    \n        .scan-qr-title, .scan-qr-text, .connection-info  {\n          text-align: center;\n          margin: 0;\n        }\n    \n        .qr-back-arrow {\n          display: inline;\n          position: relative;\n          left: 3rem;\n          top: 2.8rem;\n          z-index: 1;\n          transition: transform 0.4s ease;\n        }\n    \n        .qr-back-arrow:hover {\n          transform: scale(1.1);\n          cursor: pointer;\n        }\n    \n        .qr-code-container {\n          align-items: center;\n          justify-content: center;\n          border-radius: 1rem;\n          padding: 3.5rem;\n          background-color: rgb(24, 27, 26);\n          opacity: 1;\n          transform: scale(1);\n          transition: opacity 1s ease, transform 1s ease;\n          position: relative;\n          display: none;\n        }\n        \n        .qr-code {\n          border-radius: 1rem;\n          padding: 2rem;\n          background-color: white;\n        }\n    \n        .scan-qr-text-container {\n          position: relative;\n          bottom: 2.2rem;\n          z-index: 1;\n          display: none;\n        }\n    \n        .connection-info {\n          margin-top: 3.125rem;\n          display: none;\n        }\n  \n      ",e.appendChild(s);var f=e.getElementById("generate-btn"),h=e.getElementById("welcome-title"),v=e.getElementById("qr-code"),m=e.getElementById("scan-qr-container"),g=e.getElementById("qr-code-container"),b=e.getElementById("scan-qr-text-container"),w=e.getElementById("connection-info"),x=e.getElementById("disconnect-btn"),k=e.getElementById("qr-back-arrow"),E=(e.getElementById("qr-container"),"");f.addEventListener("click",a(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return E=p.ToUri(),m.style.display="block",g.style.display="flex",b.style.display="block",f.style.display="none",h.style.display="none",""!==E.trim()?new QRCode(v,{text:E,width:200,height:200}):console.log("Error generating QR Code"),n.next=9,L();case 9:case"end":return n.stop()}}),n)})))),k.addEventListener("click",(function(){t.disconnectServer(),v.innerHTML="",m.style.display="none",g.style.display="none",b.style.display="none",f.style.display="block",h.style.display="block"}));var L=function(){var n=a(i().mark((function n(){var e;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Inicializando la vuelta"),t=new y(p),n.next=4,t.initializeAsync();case 4:return n.next=6,t.receivePubKeyAsync();case 6:e=n.sent,console.log("La pubKey es:",e),""!==e&&(console.log("entrando aquí"),w.style.display="block",w.textContent+=e,v.style.display="none",m.style.display="none",g.style.display="none",b.style.display="none",x.style.display="block");case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return x.addEventListener("click",(function(){console.log("Desconexión iniciada"),t?t.disconnectServer():console.log("dappClient is not connected"),v.innerHTML="",v.style.display="block",f.style.display="block",h.style.display="block",w.style.display="none",x.style.display="none"})),n}return f(d)}(n(HTMLElement));customElements.define("qr-generator",h)})();